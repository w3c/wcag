<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta charset="UTF-8"></meta>
   <title>Understanding Focus Visible</title>
   <link rel="stylesheet" type="text/css" href="../../css/editors.css" class="remove"></link>
</head>
<body>
   <h1>Understanding Focus Appearance (Minimum)</h1>
   
    <section id="status" class="advisement">
        <h2>Status</h2>
        <p>This understanding document is part of the <a href="https://w3c.github.io/wcag/guidelines/22/"><strong>draft</strong> WCAG 2.2 content</a>. It may change or be removed before the final WCAG 2.2 is published.</p>
    </section>


   <section class="remove">
   
        <h2>Focus Appearance (Minimum) Success Criterion text</h2>
        <blockquote>
            <p class="conformance-level">AA</p>
        
            <p>When a <a>user interface component</a> has keyboard focus, the <a>focus indicator</a>:</p>
            <ul>
                <li><a>Encloses</a> the visual presentation of the user interface component;</li>
                <li>Has a contrast ratio of at least 3:1 between its pixels in the focused and unfocused states;</li>
                <li>Has a contrast ratio of at least 3:1 against adjacent colors.</li>
            </ul>
            <p>Exceptions:</p>

            <ul>
                <li>The focus indicator is determined by the user agent and cannot be adjusted by the author, or</li>
                <li>The focus indicator and the indicator's background color are not modified by the author, or</li>
                <li>An area of the focus indicator meets all the following:
                    <ul>
                        <li>Is at least as large as the area of a 1 CSS pixel thick <a>perimeter</a> of the unfocused component, or an area at least as large as a 4 CSS pixel thick line along the shortest side of the <a>minimum bounding box</a> of the unfocused component;</li>
                        <li>Has a contrast ratio of at least 3:1 against the same pixels in the unfocused state;</li>
                        <li>Has a contrast ratio of at least 3:1 against adjacent non-focus-indicator colors, or is no thinner than 2 CSS pixels.</li>
                    </ul>
                </li>
                </ul>

            <p>Where a user interface component has active sub-components, if a sub-component receives a focus indicator, these requirements can be applied to the sub-component instead.</p>

            <p class="note">Note: Examples of sub-components that may receive a focus indicator are menu items in an opened drop-down menu. However, it may also be possible to indicate user interaction for such sub-components by relying strictly on a visual indication of which item is <em>selected</em>. Where selectable sub-components have no differentiated focus indicator, the visual indicator for sub-component selection is measured against <a href="https://www.w3.org/WAI/WCAG22/Understanding/non-text-contrast.html">1.4.11 Non-text Contrast</a> requirements, not against this Criterion.</p>

            <p class="note">Note: Contrast calculations can be based on colors defined within the technology (such as HTML, CSS and SVG). Pixels modified by user agent resolution enhancements and anti-aliasing can be ignored.</p>
            <dl>
            <dt class="new"><dfn>Focus indicator</dfn></dt>
            <dd class="new">
	            pixels that are changed to visually indicate when a user interface component is in a focused state.                		
            </dd>
            <dt class="new"><dfn>minimum bounding box</dfn></dt>
            <dd class="new">
                the smallest enclosing rectangle aligned to the horizontal axis within which all the points of a shape lie. Where a component consists of disconnected parts, such as a link that wraps onto multiple lines, each part is considered to have its own bounding box.
            </dd>
            <dt class="new"><dfn>encloses</dfn></dt>
            <dd class="new">
                Solidly bounds or surrounds
            </dd>
            <dt class="new"><dfn>perimeter</dfn></dt>
            <dd class="new">
                continuous line forming the boundary of a shape not including shared pixels, or the minimum bounding box of a complex shape, whichever is shortest. For example, the perimeter calculation for a rectangle is 2<em>h</em>+2<em>w</em> -4, where <em>h</em> is the height and <em>w</em> is the width and the corners are not counted twice. The perimeter of a circle is 2ùúã<em>r</em>.
            </dd>
            </dl>
        </blockquote>
     </section>
   
    <section id="intent">
        
        <h2>Intent of Focus Appearance (Minimum)</h2>


        <p>The purpose of this Success Criterion (SC) is to ensure a keyboard focus indicator is clearly visible and discernible. Focus Appearance (Minimum) is closely related to <a href="https://www.w3.org/WAI/WCAG22/Understanding/focus-visible.html">2.4.7 Focus Visible</a> and <a href="https://www.w3.org/WAI/WCAG22/Understanding/non-text-contrast.html">1.4.11 Non-text Contrast</a>. Where Focus Visible merely requires a visible focus indicator, this SC defines a minimum level of visibility. Where Non-text Contrast requires a component to have adequate contrast against the background in each of its states, this SC requires sufficient contrast for the focus indicator itself.</p>

        <p>For sighted people with mobility impairments who use a keyboard or keyboard-like device (such as a switch or voice input), knowing the current point of focus is very important. Visible focus must also meet the needs of users with low vision, who may also be keyboard-only users.</p>
            
        <p>A keyboard focus indicator can take different forms. This Success Criterion lists three primary considerations that can be met to consistently achieve a sufficient focus appearance. It then provides a list of exceptions for a focus indicator which may be less optimal for some users but still achieves a minimum level of focus appearance. This Understanding document will elaborate on each of the three primary considerations, then address the exceptions.</p>

        <section id="encloses">

            <h3>Encloses</h3>
            <p>The first of the primary bullets states that the focus indicator "encloses" the user interface component. This is defined to mean "solidly bounds or surrounds." Both <em>bounds</em> and <em>surrounds</em> describe optimal and established ways of showing focus. <em>Bounds</em> and its related term "bounding box" generally describe a rectangle drawn around the outside of a user interface component. It is the most common form of focus indication and is sometimes referred to as a "focus rectangle."</p>

            <figure id="focus-indicator-basic">
                <img src="img/focus-indicator-basic.png" alt="2 blue buttons with a dark 1 pixel thick offset focus rectangle around the second" />
                <figcaption>Passes: A solid focus rectangle around the second of two buttons.</figcaption>
            </figure>

            <p>"Surrounds" also refers to something that solidly encloses a shape. However, a shape can be surrounded in many ways. For instance, the focus indicator may follow the outline of the object being enclosed. The difference between <em>bounds</em> and <em>surrounds</em> is illustrated in the following two images of a set of ratings stars. In both examples, the same three stars have already been selected, and focus is on the third star.</p>
            <figure id="focus-border-solid">
                <img src="img/focus-indicator-solid-border.svg" alt="3 of 5 stars are selected with a solid-line rectangular focus indicator around the third" />
                <figcaption> Passes: a solidly bound focus rectangle encloses the third of five stars.</figcaption>
            </figure>

            <figure id="focus-outline-solid">
                <img src="img/focus-indicator-solid-outline.svg" alt="Three of 5 stars are selected with a solid-line focus indicator in the shape of a star outlining the third" />
                <figcaption> Passes: a solid outline indicator surrounds the third of five stars.</figcaption>
            </figure>  

            <h4>Solidly</h4>
                <p>Where the indicator does not "solidly" bound or surround the component, as with a dashed or dotted line, it cannot meet this primary consideration. However, a non-solid line can still pass if it meets the wording of the exceptions (discussed in more detail under Exceptions).</p>

            <figure id="focus-indicator-weak-dashed">
                <img src="img/focus-indicator-weak-dashed-border.svg" alt="3 of 5 stars are selected with the whole third star outlined with a 1 pixel thick dashed line" />
                <figcaption> Fails: the dashed outline does not "solidly bound" the third star and does not meet the exception language.</figcaption>
            </figure>         

            <figure id="focus-indicator-strong-dashed">
                <img src="img/focus-indicator-strong-dashed-border.svg" alt="3 of 5 stars are selected with the whole third star outlined with a 2 pixel thick dashed line" />
                <figcaption> Passes: the dashed outline does not "solidly bound" the third star; however, the dashed line meets the area requirements of the exception language.</figcaption>
            </figure>      
        </section>

        <section id="contrast-pixels">

            <h3>Indicator contrasts between its focused and unfocused states</h3>

            <p>The second of the primary bullets states that the indicator "has a contrast ratio of at least 3:1 between its pixels in the focused and unfocused states." The following illustration shows a <strong>minimally</strong> contrasting focus indicator, where some of the white pixels making up the page background have been altered to a mid-grey, which contrast 3:1 with the original white. Authors are encouraged to exceed the minimum focus appearance. For instance, the dark blue lines in the first two illustrations are much more visible.</p>

            <figure id="focus-indicator-star-with-light-focus">
                <img src="img/focus-indicator-star-with-light-focus.svg" alt="Two orange-yellow five-pointed stars, one with a mid-gray focus rectangle" />
                <figcaption> Passes: Two buttons in the shape of a star, with the second surrounded by a focus indicator whose pixels contrast 3:1 between focused (light grey) and unfocused (white) states.</figcaption>
            </figure> 
        </section>
        <section id="contrast-adjacent">
            <h3>Contrasts at least 3:1 against adjacent colors</h3>

            The third of the primary bullets states that the focus indicator must contrast against the pixels on either side. Where the indicator is offset from the shape and does not directly abut the component or any other object -- as in all preceding examples -- it simply needs to contrast at least 3:1 against the page background. Offsetting is the recommended way of creating a more visible focus indicator. However, where authors choose to position the indicator so it is directly next to or overlaps another shape, it must contrast 3:1 against this adjacent shape as well. 

            <figure id="focus-indicator-abutted">
                <img src="img/focus-indicator-star-with-abutted-line.svg" alt="Two orange-yellow five-pointed stars, the second with a tightly cropped blue focus outline" />
                <figcaption>Passes: The second of two stars has a star-shaped blue outline that directly abuts the star, with which it contrasts 3:1, creating a minimally visible focus indicator.</figcaption>
            </figure>    
        </section>

        <section id="keyboard-focus">
            <h3>Component keyboard focus</h3>
            <p>The preamble to this SC is "When a user interface component has keyboard focus..." The <em>keyboard focus</em> is the point of interaction for someone using a keyboard. For environments with a keyboard-operable interface, the keyboard focus can be moved around the interface in order to interact with different components. Whichever component is being interacted with has focus.</p>

            <p>WCAG defines <em>user interface component</em> as "a part of the content that is perceived by users as a single control for a distinct function." Because different users may perceive controls differently, there is a potential for some variation when interpreting what constitutes both a <em>single control</em> and a <em>distinct function</em>. This is particularly the case when something visually presents in a way that may differ from how it is programmatically created under the covers. Where there is not a native HTML component upon which to base designs, there can be great variations in how the components and their focus indicators are portrayed. Further, some components have sub-components that can take focus, such as the menu items on a menu.</p>
            <p> Nonetheless, consistent results from different testers were obtained for this SC by using the focus indicator itself as the gauge of what constitutes the component being interacted with. For complex components, the three typical focus indicators are as follows:</p>

            <ul>
                <li>Focus indicator around only the whole component</li>
                <li>Focus indicators around both the component and subcomponent</li>
                <li>Focus indicator around only the subcomponent</li>
            </ul>
        
            <p>Each of these will be discussed, using a tablist as a familiar complex component.</p>
                
            <h4>Focus indicator around only the whole component</h4>
            <figure id="component-complex-whole">
                <img src="img/component-complex-whole.png" alt="Three tab buttons shown with a dark blue rectangle around all three tab buttons." />
                <figcaption> A tablist with a focus indicator around only the whole.</figcaption>
            </figure>    
            
            <p>When the focus indicator is shown only around the whole tablist, the user is guided to considering the tablist as a single user component. The tab items within it are visually distinguished between selected and unselected states (and visual indicators of selection state must meet the criteria given in <a href="https://www.w3.org/WAI/WCAG22/Understanding/non-text-contrast.html">1.4.11 Non-text Contrast</a>).</p>
        
            <p>Having a focus indicator <em>only</em> around the whole is possible where there is no need to have a selected sub-component while another sub-component has focus. For a tablist which synchronizes its tab panel content with whatever tab is active, only one tab item can be selected at a time, and since whatever tab is selected is considered active, a separate focus indicator is redundant.</p>
            
            <p>Result: the group focus indicator must meet the requirements of this SC.</p>
        
            <p>A <a href="https://codesandbox.io/s/practical-cori-nl4pld?file=/index.html">radio button group</a> and a <a href="https://www.w3.org/WAI/ARIA/apg/example-index/slider/slider-rating.html">star-rating widget</a>, which each use only a whole-component focus indicator, provide working examples of different complex components that pass the primary requirements of this SC. In the star ratings example, users can increment the rating by 1/2 stars. Not only is a focus indicator for each 1/2 star unnecessary, but it would actually be difficult to achieve without making the interaction confusing.</p>

            <h4>Focus indicators around both the component and subcomponent</h4>
            
            <figure id="component-complex-both">
                <img src="img/component-complex-both.png" alt="Three tab buttons shown with a dark blue rectangle around all three tab buttons, the first tab button also has a dark outline as well as a blue bar indicating it is selected." />
                <br />
                <img src="img/component-complex-both-unselected.png" alt="The same tab list showing except the first tab is selected, but the second has the focus outline." />
                <figcaption> The same tablist in two states. In the first, focus is around both the tablist and the currently selected tab; in the second, focus is around both the tablist and an unselected tab.</figcaption>
            </figure>    
        
            <p>For a tablist which does not keep its tab panel content synchronized with whatever tab is selected, there needs to be a focus indicator for the tab item subcomponent. This is because the tab item with focus may be different than the selected item.</p>
            <p>The user can navigate to the tablist, which in this implementation has a focus rectangle around the whole tablist as well as one around a tab item (conventionally the item that is currently selected). The focus around the whole is helpful in cueing a keyboard user that this is a complex component that has its own interaction. The user can then move focus between the unselected and selected tab items -- each of which in turn has its own focus indicator -- before activating one, which then makes it selected as well as focused, and updates the tab panel to match.</p>
            <p>In this scenario, either the group focus indicator or the sub-component indicator must meet the requirements of this Success Criterion. To avoid being overly prescriptive, the Success Criterion allows authors to choose which makes the most sense. Generally, if a sub-component focus is necessary, it should be assessed instead of the group indicator.</p>
        
            <p>Result: the focus indicator for the tab item meets the requirements of this SC. The tablist focus indicator does not need to meet the requirements.</p>

            <p>A <a href="https://www.w3.org/WAI/ARIA/apg/example-index/slider/slider-color-viewer.html">slider to pick colors</a> provides a working example of a different complex component that predominantly shows focus for the subcomponent. In this case, the thumb slider sub-component has a focus indicator of sufficient size and contrast to pass the exception. There is also a subtle focus around the whole slider component, but it does not need to be assessed to pass this SC.</p>
        
            <h4>Focus indicator around only the subcomponent</h4>
        
            <figure id="component-complex-sub">
                <img src="img/component-complex-sub.png" alt="Three tab buttons shown and the first button has a dark outline." />
                <figcaption> The same tabs as in the prior set, but the focus indicator around the whole is removed.</figcaption>
            </figure>   
        
        
            <p>The same unsynchronized tablist can also be implemented as something which only shows focus on the tab items and not on the whole. The behaviour is the same as in the prior example, but there is never a focus indicator placed around the tablist. This interaction is acceptable, but it is not best practice since it demands more understanding from the user with less information. For example, some visual cues for the tablist and tab items (and tab panel) may not be clear. As well, keyboard users may not initially understand the expected keyboard interaction.</p>
        
            <p>Result: the focus indicator for the tab item must meet the requirements of this SC, judging focus with both selected and unselected tab items.</p>

            <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/tab_role#example"> functional example of sub-component-only tab focus</a> has an indicator that is large enough (at least four times the shortest side) with sufficient contrast to pass the exception language of this SC.</p>
        
            <h4>Where something with focus is not a user interface component</h4>
            <p>Some pages contain very large editing regions, such as web implementations of word processors and code editors. Unlike a <code>textarea</code> element, which is a user interface component, these large editing regions do not typically meet the definition of <a href="https://w3c.github.io/wcag/guidelines/22/#dfn-user-interface-components">user interface components</a>; they are not "perceived by users as a single control for a distinct function." Providing focus indicators around such editing regions may still be beneficial to some; however, where the region is not perceived as a single control, it is not covered by this Success Criterion. The web page will still need to provide a insertion point (caret indicator) in such editing regions in order to meet the requirements of <a href="https://www.w3.org/WAI/WCAG22/Understanding/focus-visible.html">2.4.7 Focus Visible</a>.</p>

            <p>Some non-operable elements can take focus (such as a heading element that is the target of a skip link). However, the preamble of this SC refers to user interface components; it is only when the element with focus is operable by keyboard that this Success Criterion applies.</p>
        </section>
        <section id="exceptions">
            <h3>Exceptions</h3>
            <p>In addition to achieving a minimum keyboard focus appearance using the three primary means described above, an author can also meet this SC's requirements through one of several exceptions, where either:</p>
            <ul>
                <li>the focus indicator cannot be adjusted by the author,</li>
                <li>the author has not modified the effects of the user agent default, or</li>
                <li>the author provides an indicator of sufficient size and contrast.</li>
            </ul>
        </section>

        <section id="cannot-adjust">
            <h3>First exception: the focus indicator cannot be adjusted by the author</h3>

            <blockquote><p>The focus indicator is determined by the user agent and cannot be adjusted by the author</p></blockquote>
            <p>Some components or technologies may not allow the author to adjust the focus indicator. This is the case with HTML <code>select</code> elements (both single and multi-select), where the visual treatments for selection and focus cannot be adjusted by the author. In this case the Success Criterion does not apply.</p>
            <figure id="country-select">
                <img src="img/focus-indicator-select.png" alt="A country select element with Afghanistan selected and Albani with focus" />
                <figcaption>Passes: The user agent's default <code>select</code> element presentation cannot be modified by the author, so it passes regardless of the quality of the focus indicator</figcaption>
            </figure>  
        
        </section>
        <section id="default">
            <h3>Second exception: the default indicator and background are not modified</h3>
            <blockquote><p>The focus indicator and the indicator‚Äôs background color are not modified by the author</p></blockquote>
            <p>If the focus indicator and the background behind the focus indicator are not modified by the author, the Success Criterion does not apply.</p>
            <p>The intent of this exception is to reduce burden on authors by allowing them to rely on the default indicators provided by user agents (browsers). If all user agents provided good focus indicators, author would be able to concentrate efforts on other accessibility considerations. Unfortunately, browser default focus indicators vary by component, browser, and across devices and operating systems, and the default focus indicators in some browsers can be difficult to see (such as a 1px dotted outline). For this reason, most authors override browser defaults in order to overcome these deficiencies and create a more uniform user experience, regardless of browser.</p>
            <p>Some browser makers are improving their default focus indicators to make them more visible. As more browsers adopt defaults that meet the primary bullets of this SC, authors will be able to achieve improved focus indicators without customization.</p>

            <h4>Modifying the focus indicator background</h4>
            <p>Browser default focus indicators can be made <em>more</em> difficult to see if the author modifies the page background color, for instance using a blue background in combination with a browser's blue default indicator.</p> 
            
                <p>[Future image set: a button with a default light blue focus indicator; the same buton and focus indicator on a light blue page background]</p>

            <p>As well, if the browser provides an indicator within a component by default, then authors can potentially reduce the visibility by changing the component color. For example, if the default indicator on a button is a bright yellow inner focus rectangle, the authors can negatively affect the focus appearance by making the button yellow or orange. For this reason, this user agent exception can only be met if the author both does not modify the default focus indicator <em>and</em> does not modify its background. </p>

            
            <p>[Future image set: a button with a default internal focus indicator; the same button, now with a colour similar to the default internal focus indicator]</p>
        </section>
        <section id="size-contrast-exception">
            <h3>Third exception: an area of the focus indicator meets size and contrast measurements</h3>
            <p>The last exception allows for focus indicators in different forms if they meet the size and contrast requirements set out in a series of sub-bullets.</p>

            <section id="size-of-indicator">
                <h4>Minimum area</h4>
    
                <blockquote>
                    <ul>
                        <li>At least as large as the area of a 1 CSS pixel thick perimeter of the unfocused component, or is at least as large as a 4 CSS pixel thick line along the shortest side of a minimum bounding box of the unfocused component</li>
                    </ul>
                </blockquote>
                
                <p>The first of these sub-bullets defines a minimum area for the focus indicator using a calculation for perimeter, and a secondary minimum based on the shortest side of the control. It does not restrict where the indicators are placed, it is just providing two methods to calculate a minimum area.</p>
    
                <p>For the first calculation, the minimum area of the focus indicator must be at least as large as the area of a 1 CSS pixel thick perimeter (border) of the control in its unfocused state. The indicator does not have to be a border, but the indicator's area must be at least as large. For example, if a control is a rectangle of 90px wide and 30px tall, the size of the outer border is 90 + 90 + 30 + 30 = 240 CSS pixels. You then must subtract the 4 corner pixels (which are counted twice, both horizontally and vertically), for a total minimum area of 236 CSS pixels.</p>
    
                <p class="note">A <a>CSS pixel</a> is what developers use in CSS declarations like ‚Äúwidth: 200px‚Äù. It is device-independent and not to be confused with device pixels which vary depending on the physical pixel density. <br />
                    The rest of this document notates CSS pixels as "px".
                </p>
    
                <p>The following 3 examples use a 90px wide by 30px tall button, therefore the surface area requirement is 236px (240px minus corner 4 pixels). The middle button is focused in each example.</p>
    
                <figure id="focus-indicator-innerline">
                    <img src="img/focus-indicator-innerline.png" alt="Three dark blue buttons on a white background. The middle button has a yellow inner border." width="284" />
                    <figcaption> Passes: the inner outline is slightly smaller than the outer edge of the component (236px minus 2px on each side), but using a 2px thick indicator means it is well over the minimum requirement of 236px squared.</figcaption>
                </figure>
    
                <figure id="focus-indicator-underline">
                    <img src="img/focus-indicator-underline.png" alt="Three dark blue buttons on a white background. The middle button has a thick yellow line under the text." width="284" />
                    <figcaption> Passes: the thick (3px) yellow underline, at 80px almost as long as the longest edge, multiplied by 3px exceeds the requirement of 236px squared.</figcaption>
                </figure>
    
                <p>If controls change size across different variations of a page (e.g., in a responsive design), it helps to use a proportionally sized indicator such as an outline or background change. In that way you can be sure of meeting the size requirement.</p>

                <p>Another way of achieving the area exception is to alter the appearance of the entire component, for instance by changing its color. This can be effective in a set of closely placed buttons. The following example using the same set of 5 ratings stars given in the first illustrations in this document, shows how this can be achieved. However, it is much more difficult to detect such a focus indicator when components are not near each other and so cannot be easily compared. For users using magnfication, even components relatively close together may be difficult to compare, so it is not considered a best practice.  </p>
                <figure id="focus-indicator-whole">
                    <img src="img/focus-indicator-whole-star.svg" alt="3 of 5 stars are selected with the whole third star altered in color to indicate focus" />
                    <figcaption> Passes: a color change applies to the whole third star to indicate focus.</figcaption>
                </figure> 

                <p>The Success Criterion includes an alternative size measure of "at least as large as a 4 CSS pixels border along the shortest side". This is included to allow for smaller but thick indicators. For example, some controls might be of a fixed height but variable width, in which case this measure allows for a more consistent approach.</p>
    
                <figure id="focus-indicator-shortside">
                    <img src="img/focus-indicator-thick-short-side.png" alt="Two dark blue buttons on a white background. The left button has a very thick yellow block of color left of the text." width="284" />
                    <figcaption> Passes: the yellow block on the left is along the short side, but very thick.</figcaption>
                </figure>
    
                <p>Typical focus indicators:</p>
                <ul>
                    <li>A solid outline around the whole component would pass the size requirement;</li>
                    <li>A 1 CSS pixel dotted outline around the whole component would <strong>not pass</strong> the size requirement, as it is roughly 50% of the surface area of a solid line.</li>
                    <li>Changing the background within a control would pass the size requirement;</li>
                    <li>A 1px wide vertical line (such as a blinking cursor) would <strong>not pass</strong> the size requirement; a text input would need a larger or separate focus indicator.</li>
                </ul>
                <p>The bigger the visible change when an item receives focus, the easier it is for someone to see. Authors are encouraged to make the change as significant as possible, for example by designing a thick border around the element. If you need to use complex mathematics to work out if a focus indicator is large enough, it is probably a sign that you should use a larger and proportional indicator that will provide a more visible indicator.</p>

                <h5>Unusual shapes</h5>
            
                <p>If you have an unusual shape (not rectangular), some mathematics may be required if the focus indicator is on the edge of the size requirement. For example, if the focusable control is a circle with a diameter of 100px, the circumference would be 314 pixels. A 1px (or greater) outline would meet the size criterion.</p>

                <figure id="focus-indicator-circle">
                    <img src="img/focus-indicator-circle.png" alt="Two orange circular buttons with an icon in the middle. The right hand circle has a dark outline around the whole circle to indicate focus" width="150" />
                    <figcaption> Passes: a circular button in the default state, and then with a focus indicator.</figcaption>
                </figure>

                <p>If a focus indicator is an irregular shape, such as a drop shadow under a star icon, it helps if the contrasting area is quite large.</p>

                <figure id="focus-indicator-star-shadow">
                    <img src="img/focus-indicator-star-shadow.png" alt="Two yellow star symbols, the second has a dark drop-shadow." width="400" />
                    <figcaption> Passes? An unfocused star component beside one using a drop shadow to show focus.</figcaption>
                </figure>

                <p>What is the contrasting area of the drop shadow? The quick method is:</p>
                <ul>
                    <li>Look at the size of the component, how long is it around the edges?</li>
                    <li>Look at the (contrasting) area of the focus indicator.</li>
                    <li>Mentally compare the focus indicator to the border of the component.</li>
                </ul>

                <p>If it is too close to call, you could extract the contrasting area of the focus indicator and evaluate the surface area.</p>
                <h5>Gradients</h5>
                <p>If a focus indicator has a gradient, the principle is to measure the contrast of the changed area, and ignore the change that does not meet 3:1.</p>
                <figure id="focus-indicator-box-shadow">
                    <img src="img/focus-indicator-box-shadow.png" alt="Three buttons, the middle with a heavy drop-shadow indicating focus." />
                    <figcaption> Passes? When a gradient is used on a focus indicator, the measure of surface area should only include the area that has changed enough to meet the 3:1 contrast ratio.</figcaption>
                </figure>
                <p>If you take some spot-checks on the gradient area and establish what area meets the contrast, it is straightforward to work out if that area is sufficient.</p>
                <figure id="focus-indicator-box-shadow-only">
                    <img src="img/focus-indicator-box-shadow-only.png" alt="The middle button with the drop-shadow included, but the subtle grey areas removed to only show the contrasting area." />
                    <figcaption> Passes: the focused button with the non-contrasting areas removed, showing that it is a thick indicator that meets the requirements.</figcaption>
                </figure>
                <p class="note">Some of the examples in this document, especially in the Exceptions section, are screen-captured images of elements. Due to loss of resolution in these images, the actual pixel color may not match the original. As such, they are intended to be used for illustrative purposes, and should not be inspected on a pixel-by-pixel basis for sufficient contrast.</p>    
                <p>Some designs have pages with a non-solid background image covering the whole (or part) of the page or make use of parallax scrolling effects which result in a near-infinite number of color combinations if a page is scrolled and/or changes are made to the viewport size.</p>
                <p>If the contrast of background colors that change are close enough to need to be tested for each combination then they would likely not meet the user need of people with low vision in certain scroll combinations and would likely fail in certain combinations as well. In these cases it would be an easy solution to use a <a href="https://www.w3.org/WAI/WCAG22/Techniques/css/C40">double ring focus indicator</a> or some other mechanism to indicate focus such as a solid box with a border to guarantee there is sufficient contrast across variations of background images or background gradients.</p>
                <h5>Inline links</h5>
                <p>If an inline link is broken over multiple lines, some methods of focus indicator are treated differently by browsers. Using CSS, an <code>outline</code> wraps each part of a wrapped link separately. A <code>border</code> will wrap the whole link as one perimeter. Each part of the link will pass or fail as though they were separate links. If a 1px CSS border is used rather than outline, the thickness may need to be increased to compensate for the missing sides as it is not a complete perimeter for each part of the link.</p>
                <figure id="focus-indicator-inline-link">
                    <img src="img/focus-inline-link.png" alt="A paragraph of text containing a link broken over two lines. The red focus indicator has a gap on the right of one part of the link, and on the left of the other part of the link." />
                    <figcaption> Passes? The wrapping affects the calculation since the element is not contiguous and each part is missing one side of the perimeter.</figcaption>
                </figure>

                <figure id="focus-indicator-inline-link-outline">
                    <img src="img/focus-inline-link-outline.png" alt="A paragraph of text containing a link broken over two lines. The red focus indicator is a complete rectangle around each part of the link." />
                    <figcaption> Passes: the CSS outline property wraps each part of the link completely, so does not affect the calculation of indicator area.</figcaption>
                </figure>
            </section>

            <section id="change-of-contrast">
                <h4>Change of contrast</h4>

                <blockquote>
                    <ul>
                        <li>has a contrast ratio of at least 3:1 against the same pixels in the unfocused state</li>
                    </ul>
                </blockquote>

                <p>The second of these exception sub-bullets matches the second of the primary considerations about a visual difference between a component with and without focus. The greater the change of contrast between states, the easier it is for users to see it. Authors are encouraged to make the change of color contrast as great as possible.</p>

                <p>When a component changes to include a focus indicator, that change can be measured as a change of color contrast. For example, if a yellow outline is added to a button on a blue background, the change of color is from blue to yellow. This change can be measured whether the focus indicator is on the background around the component, or the background within the component.</p>
                        
                <figure id="focus-indicator-innerline-2">
                    <img src="img/focus-indicator-innerline.png" alt="Three dark blue buttons on a white background. The middle button has a yellow inner border." width="284" />
                    <figcaption> Passes: adding a yellow outline to a link is a change of color from blue to yellow. That change has a contrast ratio of 12:1.</figcaption>
                </figure>        

                        
                <p>Text and non-text contrast measures use adjacent colors; this Success Criterion measures the <em>change</em> in color between non-focused and focused states.</p>

                <figure id="focus-indicator-non-contrast">
                    <img src="img/focus-indicator-non-contrast.png" alt="Three buttons with light background and dark border on a white background. The middle button has a light grey outline." width="250" />
                    <figcaption> Fails: the second link has a light-grey (#ccc) focus outline which <strong>fails</strong> this Success Criterion because the change from white-background to light-grey outline does not meet 3:1.</figcaption>
                </figure>
                <p class="note">Color contrast measurements in WCAG are based on luminance (brightness) regardless of the hue.</p>

                <p>If a control receiving focus changes its background (fill color) to a color that contrasts less than 3:1 with the original background, that would not pass the change of contrast.</p>

                <figure id="focus-indicator-background">
                    <img src="img/focus-indicator-background.png" alt="Three black buttons with a dark background. The middle button has a dark grey background." width="250" />
                    <figcaption> Fails: the second link has a dark-grey (#555) which <strong>fails</strong> this Success Criterion because the change from black-background to dark-grey background does not meet 3:1.</figcaption>
                </figure>
                <p>If the background change is sufficient, it is a method of passing the criterion.</p>
                <figure id="focus-indicator-background-passing">
                    <img src="img/focus-indicator-background-passing.png" alt="Three black buttons with a dark border and two have a dark background. The middle button has a white background." width="250" />
                    <figcaption> Passes: the second link has a white background (#fff) which <strong>passes</strong> this Success Criterion because the change from black-background to white-background meets 3:1.</figcaption>
                </figure>

                <p>It is possible to use visual patterns such as strips switching places to disguise a change of focus indicator. This is not considered a visible indicator.</p>
            </section>
            <section id="contrast-thickness">
                <h3>Adjacent contrast</h3>

                <blockquote>
                    <ul>
                        <li>Has a contrast ratio of at least 3:1 against the component, or is no thinner than 2 CSS pixels.</li>
                    </ul>
                </blockquote>

                <p>The third of these exception sub-bullets is similar to the third primary consideration -- the focus indicator must contrast with whatever it is next to <strong>or</strong> it must be thick enough that it is easier to see. Where a control is a solid color, and you add a border or outline of a very similar color, it is difficult to perceive the change to the control.</p>

                <figure id="focus-indicator-thin-non-contrast">
                    <img src="img/focus-indicator-thin-non-contrast.png" alt="Three dark buttons, the middle one appears very slightly larger due to a thin dark outline." width="255" />
                    <figcaption> Fails: adding a 1px dark outline around a dark button does not differentiate it. This example <strong>fails</strong> the Success Criterion.</figcaption>
                </figure>
                        
                <p>The requirement is to have an indicator that has a 3:1 contrast ratio with the adjacent colors of the component, or to be separated from the component, or to be at least 2px thick.</p>

                <figure id="focus-indicator-thick-non-contrast">
                    <img src="img/focus-indicator-thick-non-contrast.png" alt="Three dark buttons, the middle one appears larger due to a thick dark outline." width="255" />
                    <figcaption> Passes: adding a 2px border around the button helps to differentiate which one is focused.</figcaption>
                </figure>

                <figure id="focus-indicator-outerline">
                    <img src="img/focus-indicator-outerline.png" alt="Three dark buttons, the middle one has a outline slightly offset away from the component, so there is a gap between the component's background and the outline." width="250" />
                    <figcaption> Adding an outline that is separated from the button helps to differentiate which one is focused.</figcaption>
                </figure>

                <p>If the focus indicator uses several colors, any color which does not contrast 3:1 against adjacent colors can be ignored as long as there is a 2 CSS pixel-thick part of the focus indicator whose pixels all change at least 3:1 between their focused and non-focused states. Practically, this means 3D drop-shadows and other stylings on a focus indicator can likely be ignored.</p>

                <figure id="focus-indicator-extra-outline">
                    <img src="img/focus-indicator-extra-outline.png" alt="Two dark blue buttons on a white background. The second one has a dark outline, then a light grey outline on the outside." width="250" />
                    <figcaption> Passes: the 3px thick dark outline also meets the size and change of contrast requirements. The light grey outline can be ignored.</figcaption>
                </figure>
                <p>Where a focus indicator is defined in code as a certain size (e.g. 2px thickness) or color, anti-aliasing can be ignored for the purposes of calculation. Dotted or dashed outlines have various levels of gaps depending on the browser, screen density, and thickness. For example, in most browsers a "dotted" line will have roughly half the number of pixels due to gaps. However, in some sizes or browsers it might be slightly less than half, so increasing the thickness may be required.</p>
            </section>

            <section id="relation-non-text-color-contrast">
                <h3>Relationship to Non-text Contrast</h3>
                <p>In combination with <a href="focus-visible">2.4.7 Focus Visible</a>,  <a href="non-text-contrast" class="sc">1.4.11 Non-text Contrast</a> requires that the visual focus indicator for a component must have sufficient contrast against the adjacent colors when the component is focused, except where the appearance of the component is determined by the user agent and not modified by the author.</p>
                    
                <p>However, Non-text Contrast differs in what it assesses. Unlike the current Success Criterion, it does not require that the focus indicator has a change of contrast <em>between</em> the focused and non-focused states. Additionally, there is no size requirement and no exception for user agent default indicators.</p>
                
                <figure id="focus-indicator-ntc-comparison1">
                    <img src="img/focus-indicator-ntc-comparison1.png" alt="Three dark blue buttons, the center button also has a thin dark line around it." width="400" />
                    <figcaption> A 1px dark outline around a dark button would pass 1.4.11 Non-text Contrast, but fails this Success Criterion.</figcaption>

            </figure>

            </section>
        </section>
    </section>

    <section id="benefits">
        <h2>Benefits of Focus Visible</h2>
        
        <ul>
            <li>This Success Criterion helps anyone who relies on the keyboard to operate the page, by letting them visually determine the component on which keyboard operations will interact at any point in time.</li>
            <li>People with attention limitations, short term memory limitations, or limitations in executive processes benefit by being able to discover where the focus is located.</li>
        </ul>
    
    </section>

    <section id="examples">
        <h2>Examples of Focus Visible</h2>

        <ul>
            <li>When links receive focus, an outline is displayed around the link that contrasts with the background adjacent to the link.</li>
            <li>When buttons receive focus, an outline is displayed within the button (around the text) that contrasts with the button‚Äôs background.</li>
            <li>When text fields receive focus, an outline is displayed around the field, indicating that the input has focus.</li>  
            <li>When radio buttons receive focus, an outline is displayed around the control, indicating that the input has focus.</li>        
        </ul>
        
    </section>

    <section id="resources">
        <h2>Resources</h2>
        <ul>
            <li><a href="https://www.sarasoueidan.com/blog/focus-indicators/">A guide to designing accessible focus indicators</a> by Sara Soueidan</li>
            </ul>
    </section>

    <section id="techniques">
        <h2>Techniques for Focus Appearance (Minimum)</h2>
        
        
        <section id="sufficient">
            <h3>Sufficient Techniques</h3>
            
            
            <ol>
                <li>
                    <a href="https://www.w3.org/WAI/WCAG21/Techniques/general/G195" class="general">Using an author-supplied, highly visible focus indicator</a>
                </li>
                <li>
                <a href="../../techniques/css/C40">Creating a two-color focus indicator to ensure sufficient contrast</a>
                </li>
                <li>
                    <a href="../../techniques/css/C41">Creating a contrasting focus indicator inside the component</a>
                </li>
            </ol>
            
        </section>
    
        <section id="advisory">
            <h3>Additional Techniques (Advisory)</h3>
            
        </section>
    
        <section id="failure">
            <h3>Failures</h3>
            <ol>
                <li>
                    Using a CSS border for inline text which can wrap (Potential future technique)
                </li>
            </ol>
        </section>
    
    </section>
</body>
</html>
