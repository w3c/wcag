<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>

   <meta charset="UTF-8"></meta>
   <title>Understanding Focus Appearance</title>
   <link rel="stylesheet" type="text/css" href="../../css/editors.css" class="remove"/>

</head>

<body>
    <h1>Understanding Focus Appearance</h1>

    <section id="brief">
        <h2>In brief</h2>
        <dl>
            <dt>Goal</dt>
            <dd>Make it easier to spot the keyboard focus.</dd>
            <dt>What to do</dt>
            <dd>Use a focus indicator of sufficient size and contrast.</dd>
            <dt>Why it's important</dt>
            <dd>Many people can't see small changes in visual appearance, including older people.</dd>
        </dl>
    </section>

    <section id="intent">

        <h2>Intent of Focus Appearance</h2>


        <p>The purpose of this Success Criterion is to ensure a keyboard focus indicator is clearly visible and
            discernible. Focus Appearance is closely related to <a
                href="https://www.w3.org/WAI/WCAG22/Understanding/focus-visible.html">2.4.7 Focus Visible</a> and <a
                href="https://www.w3.org/WAI/WCAG22/Understanding/non-text-contrast.html">1.4.11 Non-text Contrast</a>.
            Focus Visible requires that a visible focus indicator exists while a component has keyboard focus; Focus
            Appearance defines a minimum level of visibility. Where Non-text Contrast requires a component to have
            adequate contrast against the background in each of its states, Focus Appearance requires sufficient
            contrast for the focus indicator itself.</p>

        <p>For sighted people with mobility impairments who use a keyboard or a device that utilizes the <a>keyboard interface</a>
            (such as a switch or voice input), knowing the current point of focus is very important. Visible focus must also meet the needs
            of users with low vision, who may also rely on the keyboard.</p>

        <p>A keyboard focus indicator can take different forms. This Success Criterion encourages the use of a solid
            outline around the focused user interface component, but allows other types of indicators that are at least
            as large.</p>


        <p>This Understanding document will elaborate on the minimum area requirement, color contrast requirements, and
            finally list some user agent exceptions.</p>

        <section id="minimum-area">
            <h3>Minimum area</h3>

            <p>The first part of the Success Criterion specifies a minimum area for the focus indicator:</p>

            <blockquote>
                <ul>
                    <li>is at least as large as the area of a 2 <a>CSS pixel</a> thick <a>perimeter</a> of the unfocused
                        component or sub-component</li>
                </ul>
            </blockquote>


            <p>This only specifies a minimum area for the focus indicator. It does not require that the focus indicator
                literally be a 2 CSS pixel thick outline, only that the indicator be at least that large.</p>

            <p>However, the simplest way to meet the size requirement is to use a focus indicator which <em>is</em> a
                solid 2 CSS pixel thick perimeter.</p>

            <p class="note">A <a>CSS pixel</a> is what developers use in CSS declarations like ‚Äúwidth: 200px‚Äù. It is
                device-independent and not to be confused with device pixels which vary depending on the physical pixel
                density. <br />

                The rest of this document notates CSS pixels as ‚Äúpx‚Äù.
            </p>

            <section id="area-solid-outline">
                <h4>Using a solid outline</h4>

                <p>The easiest and most common way to meet this requirement is to use a solid outline around the
                    component. The outline must be at least 2px thick. The following illustration shows a
                    <strong>minimally</strong> thick focus indicator, where a 2px thick band of white pixels making up
                    the page background around an example button have been altered to black.
                </p>

                <figure id="focus-indicator-basic">

                    <img src="img/focus-indicator-basic.png"
                        alt="2 blue buttons with a dark 2 pixel thick offset focus rectangle around the second" />

                    <figcaption>Passes: The focus indicator is a solid 2px thick outline.</figcaption>
                </figure>

                <p>For non-rectangular components, the "perimeter" definition allows authors to use either of the
                    following types of outline:</p>

                <ul>
                    <li>a line which solidly encloses a shape, or</li>
                    <li>a line which solidly encloses the <a>minimum bounding box</a> of a shape</li>
                </ul>

                <p>For example, a star-shaped button may use either a focus indicator that follows the shape of the star
                    or a focus indicator that follows the bounding box of the star. In the following examples, the same
                    three stars have already been selected, and focus is on the third star. The first example uses a
                    focus indicator which matches the star shape of the focused star. The second uses a rectangular
                    indicator.</p>

                <figure id="focus-outline-solid">

                    <img src="img/focus-indicator-solid-outline.svg"
                        alt="Three of 5 stars are selected with a solid-line focus indicator in the shape of a star outlining the third" />

                    <figcaption>Passes: a solid outline indicator surrounds the third of five stars.</figcaption>
                </figure>

                <figure id="focus-border-solid">

                    <img src="img/focus-indicator-solid-border.svg"
                        alt="3 of 5 stars are selected with a solid-line rectangular focus indicator around the third" />

                    <figcaption>Passes: a solidly bound focus rectangle encloses the third of five stars.</figcaption>
                </figure>

                <p>Offsetting indicators slightly from the focused component, as in the examples above, is not required
                    to meet the minimum area requirement of the success criterion, but it can help make indicators more
                    visible. In CSS, the <code>outline</code> and <code>outline-offset</code> properties are commonly
                    used to achieve this.</p>

                <p>The smallest possible 2 CSS pixel thick indicator that is still a "perimeter" is a solid line that
                    appears inside the component against the component's outer edge, for example by using a CSS
                    <code>border</code> property. Indicators that are inset further within the component (not directly
                    against the component's outer edge) need to be thicker than 2 CSS pixels to meet the minimum size
                    requirement.
                </p>

                <figure id="focus-offsets">

                    <img src="img/focus-indicator-offset-types.png"
                        alt="a button along with 4 examples of different 2px solid focus indicators for it: offset outside the component, an outline around the boundary of the component, a border inside the boundary of the component, and inset inside the component" />
                    <figcaption>All four of these example focus indicators are 2px solid lines. The "outset", "outline",
                        and "border" indicators pass. The "inset" indicator does not meet the minimum area requirement
                        and fails; it would need to be at least 3px thick to pass.</figcaption>

                </figure>

                <p>Note that different Non-text Contrast requirements may apply depending on whether the focus indicator
                    is offset from, inset into, or against the edge of the component. See the <a
                        href="#relationship-with-non-text-contrast">Relationship with Non-text Contrast</a> section
                    below.</p>
            </section>
            <section id="area-other-indicator-shapes">
                <h4>Other indicator shapes</h4>

                <p>This Success Criterion does not require that focus indicators be solid outlines. Other shapes may be
                    used so long as they meet the minimum area requirement.</p>

                <p>The minimum area of the focus indicator for a control is the area of a 2 CSS pixel thick perimeter of
                    the control (or its minimum bounding box) in the control's unfocused state. For example, if a
                    control is a rectangle 90px wide and 30px tall, the area of a 2 CSS pixel thick perimeter is
                    difference between the areas of:</p>

                <ul>
                    <li>A 92px by 32px rectangle (1px larger on all sides), and</li>
                    <li>A 88px by 28px rectangle (1px smaller on all sides)</li>
                </ul>

                <p>This results in a minimum area of (92px * 32px) - (88px * 28px) = 480px<sup>2</sup>.</p>

                <p>Some general formulas for 2 CSS pixel thick perimeters of common shapes are:</p>

                <dl>
                    <dt>Rectangle with width <em>w</em> and height <em>h</em></dt>
                    <dd>4<em>h</em> + 4<em>w</em></dd>
                    <dt>Circle with radius <em>r</em></dt>
                    <dd>4ùúã<em>r</em></dd>
                    <dt>Rounded rectangle with width <em>w</em>, height <em>h</em>, and border radius <em>r</em></dt>
                    <dd>4<em>h</em> + 4<em>w</em> - (16 - 4ùúã)<em>r</em></dd>
                </dl>

                <p class="note">If you need to use complex mathematics to work out if a focus indicator is large enough,
                    it is probably a sign that you should use a larger indicator instead. The bigger the visible change
                    when an item receives focus, the easier it is for someone to see.</p>

                <p>The following 2 examples use a 90px wide by 30px tall button, with a minimum area requirement of
                    480px<sup>2</sup>:</p>

                <figure id="focus-indicator-custom-shapes-inset">

                    <img src="img/focus-indicator-custom-shapes-inset.png"
                        alt="Three 90 by 30 pixel buttons. The middle button has a focus indicator which is a 3px thick outline inset by 3px inside the button" />
                    <figcaption>Passes: the inner outline is inset slightly from the outer edge of the component, but
                        compensates for this by being 3px thick. It has an area of 612px<sup>2</sup>, which exceeds the
                        480px<sup>2</sup> minimum.</figcaption>
                </figure>

                <figure id="focus-indicator-custom-shapes-side-highlights">
                    <img src="img/focus-indicator-custom-shapes-side-highlights.png"
                        alt="Three 90 by 30 pixel buttons. The middle button has a focus indicator which is two rectangles inside the button, one on either side" />
                    <figcaption>Passes: the indicator rectangles on either side of the focused button are each 9px wide
                        by 28px tall. In total, they are 504px<sup>2</sup>, which just barely meets the
                        480px<sup>2</sup> minimum.</figcaption>

                </figure>

                <p class="note">Prefer using focus indicator techniques that scale with both the width and height of the
                    focused control. Otherwise, if controls change size across different variations of a page (for
                    example, in a responsive design), the indicator might meet the area requirement in some variations
                    but not others. For example, in the above figure, if the width of the two highlight rectangles did
                    not scale as the button grew wider, it would stop meeting the minimum area requirement if the button
                    needed to grow any wider to accomodate a longer button label.</p>

                <p>Another way of achieving the area requirement is to alter the appearance of the entire component, for
                    instance by changing its color ‚Äì provided that the new color has a contrast ratio of at least 3:1
                    against the original color. This can be effective in a set of closely placed buttons. The following
                    example demonstrates this with 5 rating stars; the center star is filled in with a darker color to
                    indicate focus. However, it is much more difficult to detect such a focus indicator when components
                    are not near each other and so cannot be easily compared. For users using magnification, even
                    components relatively close together may be difficult to compare, so it is not considered a best
                    practice.</p>

                <figure id="focus-indicator-whole-star">

                    <img src="img/focus-indicator-whole-star.svg"
                        alt="3 of 5 stars are selected with the whole third star altered in color to indicate focus" />

                    <figcaption>Passes: a color change applies to the whole third star to indicate focus.</figcaption>
                </figure>
            </section>
            <section id="area-inline-links">
                <h4>Inline links</h4>
                <p>If an inline link is broken over multiple lines, some methods of creating a focus indicator create
                    different results by browsers. CSS <code>outline</code> separately surrounds each part of a link
                    that breaks across multiple lines. It is by far the most common CSS technique for focus indication,
                    and produces a result that satisfies the minimum bounding box definition since each part is solidly
                    bound. CSS <code>border</code> will split the perimeter across the parts of the link, which results
                    in an unenclosed border for each line of the link. The minimum bounding box definition states that
                    link focus can be assessed as if the link was all on one line, so a 2px thick border is also
                    considered to meet the minimum area requirement. Therefore, where the contrast requirements are met,
                    each of these methods can produce a sufficient focus indicator.</p>

                <figure id="focus-indicator-inline-link-outline">

                    <img src="img/focus-inline-link-outline.png"
                        alt="A paragraph of text containing a link broken over two lines. The red focus indicator is a complete rectangle around each part of the link." />
                    <figcaption>Passes: the CSS <code>outline</code> property solidly bounds each part of the link
                        completely, so it meets the definition of a perimeter.</figcaption>
                </figure>

                <figure id="focus-indicator-inline-link">
                    <img src="img/focus-inline-link.png"
                        alt="A paragraph of text containing a link broken over two lines. The red focus indicator has a gap on the right of one part of the link, and on the left of the other part of the link." />
                    <figcaption>Passes: Although the CSS <code>border</code> on a multi-line link does not enclose the
                        separate parts of the link, the minimum bounding box definition allows it to be assessed as if
                        it was on a single line, so it also qualifies as a perimeter.</figcaption>

                </figure>
            </section>
        </section>

        <section id="change-of-contrast">
            <h3>Change of contrast</h3>

            <p>The second part of the Success Criterion's indicator requirements states that an area of the indicator:
            </p>

            <blockquote>
                <ul>
                    <li>has a contrast ratio of at least 3:1 between the same pixels in the focused and unfocused states
                    </li>
                </ul>
            </blockquote>

            <p>This requirement measures the change of contrast between the same pixels in different states. This is
                different from the Text Contrast and Non-text Contrast Success Criteria, which measure the contrast
                between different adjacent pixels in a single state at a time.</p>

            <p>3:1 is the <strong>minimum</strong> allowable change-of-contrast ratio, but the greater the change of
                contrast between states, the easier it is for users to see the focus indicator. Authors are encouraged
                to make the change-of-contrast ratio as great as possible.</p>

            <p>The following illustration shows a <strong>minimally</strong> contrasting focus indicator, where some of
                the white pixels making up the page background have been altered to a mid-grey that has a 3:1 contrast
                ratio with the original white. Authors are encouraged to exceed the minimum focus appearance. For
                instance, the dark blue lines in figures 2 and 3 are much more visible.</p>

            <figure id="focus-indicator-star-with-light-focus">

                <img src="img/focus-indicator-star-with-light-focus.svg"
                    alt="Two orange-yellow five-pointed stars, one with a mid-gray focus rectangle" />
                <figcaption> Passes: Two buttons in the shape of a star, with the second surrounded by a focus indicator
                    whose pixels contrast 3:1 between focused (light grey) and unfocused (white) states.</figcaption>

            </figure>

            <p>When a component changes to include a focus indicator, that change can be measured as a change of color
                contrast. For example, if a yellow outline is added to a button on a blue background, the change of
                color is from blue to yellow. This change can be measured whether the focus indicator is on the
                background around the component, or the background within the component.</p>

            <figure id="focus-indicator-innerline-2">

                <img src="img/focus-indicator-innerline.png"
                    alt="Three dark blue buttons on a white background. The middle button has a yellow inner border."
                    width="284" />
                <figcaption> Passes: adding a yellow outline to a link is a change of color from blue to yellow. That
                    change has a contrast ratio of 12:1.</figcaption>

            </figure>

            <p>If a control receiving focus changes its background (fill color) to a color that contrasts less than 3:1
                with the original background, that would not pass the change of contrast.</p>

            <figure id="focus-indicator-background">

                <img src="img/focus-indicator-background.png"
                    alt="Three black buttons with a dark background. The middle button has a dark grey background."
                    width="250" />
                <figcaption> Fails: the second link has a dark-grey (#555) which <strong>fails</strong> this Success
                    Criterion because the change from black-background to dark-grey background does not meet 3:1.
                </figcaption>

            </figure>

            <p>If the background change is sufficient, it is a method of passing the criterion.</p>

            <figure id="focus-indicator-background-passing">

                <img src="img/focus-indicator-background-passing.png"
                    alt="Three black buttons with a dark border and two have a dark background. The middle button has a white background."
                    width="250" />
                <figcaption> Passes: the second link has a white background (#fff) which <strong>passes</strong> this
                    Success Criterion because the change from black-background to white-background meets 3:1.
                </figcaption>

            </figure>

            <section id="change-of-contrast-partial">
                <h4>Partially contrasting indicators</h4>

                <p>It is not necessary for the <em>entire</em> focus indicator to have a 3:1 change of contrast. It is
                    sufficient for just a part of the indicator to meet the change of contrast requirement, so long as
                    the contrasting part of the indicator meets the minimum area requirement.</p>

                <figure id="focus-indicator-two-color-thick">

                    <img src="img/focus-indicator-two-color-thick.png"
                        alt="A button whose focus indicator is two nested outlines: an inner 2px thick light gray outline with low contrast against the background, and an outer 2px thick black outline with high contrast" />
                    <figcaption>Passes: The black part of the indicator meets 3:1 contrast with the white background,
                        but the gray part does not. The black part is 2px thick, so it meets the minimum area
                        requirement on its own and the gray part can be ignored.</figcaption>
                </figure>

                <figure id="focus-indicator-two-color-thick">
                    <img src="img/focus-indicator-two-color-thin.png"
                        alt="A button whose focus indicator is two nested outlines: an inner 1px thick light gray outline with low contrast against the background, and an outer 1px thick black outline with high contrast" />
                    <figcaption>Fails: The indicator as a whole is 2px thick, but the part of it that has sufficient
                        change-of-contrast is only 1px thick. The part of the indicator with sufficient
                        change-of-contrast does not meet the minimum area requirement.</figcaption>

                </figure>

                <p>When calculating whether a focus indicator meets the minimum area requirement, only the part of the
                    indicator which meets the change-of-contrast requirement should be included in the calculation.</p>
            </section>

            <section id="change-of-contrast-gradients">
                <h4>Gradients</h4>

                <p>If a focus indicator has a gradient, the principle is to measure the contrast of the changed area,
                    and ignore any part of the gradient which has less than a 3:1 change-of-contrast ratio.</p>

                <figure id="focus-indicator-box-shadow">

                    <img src="img/focus-indicator-box-shadow.png"
                        alt="Three buttons, the middle with a heavy drop-shadow indicating focus." />
                    <figcaption>When a gradient is used on a focus indicator, the measure of surface area should only
                        include the area that has changed enough to meet the 3:1 contrast ratio.</figcaption>

                </figure>

                <p>If you eliminate the area which has less than 3:1 change-of-contrast, you can calculate the area of
                    the remaining parts of the indicator to determine whether the indicator meets the minimum area
                    requirement.</p>

                <figure id="focus-indicator-box-shadow-only">

                    <img src="img/focus-indicator-box-shadow-only.png"
                        alt="The middle button with the drop-shadow included, but the subtle grey areas removed to only show the contrasting area." />
                    <figcaption>Passes: the same focused button with the non-contrasting areas removed. The contrasting
                        area is 6px thick along most of the bottom edge and 3-4px thick on the left and right edges,
                        which is enough to meet the minimum area requirement.</figcaption>
                </figure>

                <p class="note">Some of the examples in this document are screen-captured images of elements. Due to
                    loss of resolution in these images, the actual pixel color may not match the original. As such, they
                    are intended to be used for illustrative purposes, and should not be inspected on a pixel-by-pixel
                    basis for sufficient contrast.</p>

                <p>Some designs have pages with a non-solid background image covering the whole (or part) of the page or
                    make use of parallax scrolling effects which result in a near-infinite number of color combinations
                    if a page is scrolled and/or changes are made to the viewport size.</p>

                <p>If the contrast of background colors that change are close enough to need to be tested for each
                    combination then they would likely not meet the user need of people with low vision in certain
                    scroll combinations and would likely fail in certain combinations as well. In these cases it would
                    be an easy solution to use a <a href="https://www.w3.org/WAI/WCAG22/Techniques/css/C40">two-color
                        focus indicator</a> or some other mechanism to indicate focus such as a solid box with a border
                    to guarantee there is sufficient contrast across variations of background images or background
                    gradients.</p>

                <p>It is possible to use visual patterns such as strips switching places to disguise a change of focus
                    indicator. However, this is not considered a visible indicator.</p>

            </section>
        </section>

        <section id="relationship-with-non-text-contrast">
            <h3>Relationship with Non-text Contrast</h3>

            <p>Focus indicators are visual information required to identify a state of a user interface component. That
                means that they are subject to <a href="non-text-contrast" class="sc">1.4.11 Non-text Contrast</a>, in
                addition to 2.4.13 Focus Appearance.</p>

            <p>In combination with <a href="focus-visible">2.4.7 Focus Visible</a>, <a href="non-text-contrast"
                    class="sc">1.4.11 Non-text Contrast</a> requires that the visual focus indicator for a component
                must have sufficient contrast against the adjacent colors when the component is focused, except where
                the appearance of the component is determined by the user agent and not modified by the author.</p>

            <p>The difference between the contrast requirements in Focus Appearance and Non-text Contrast is:</p>

            <ul>
                <li>Focus Appearance requires that focus indicators have a <em>change of contrast</em> between focused
                    and non-focused states.</li>
                <li>Non-text Contrast requires that focus indicators have <em>adjacent contrast</em> between the
                    indicator (in the focused state) and adjacent non-indicator colors.</li>
            </ul>

            <figure id="non-text-contrast-fail-focus-appearance-pass">

                <img src="img/focus-indicator-good-change-bad-adjacent.png"
                    alt="A light blue button with a 3px thick border. The border is black in the unfocused state and light gray in the focused state." />
                <figcaption>This example passes Focus Appearance but fails Non-text Contrast; there is insufficient
                    <em>adjacent contrast</em> between the focus indicator and the adjacent colors.
                </figcaption>
            </figure>

            <figure id="non-text-contrast-pass-focus-appearance-fail">
                <img src="img/focus-indicator-good-adjacent-bad-change.png"
                    alt="A light blue button with a 3px thick border. The border is black in the unfocused state and dark gray in the focused state." />
                <figcaption>This example passes Non-text Contrast but fails Focus Appearance; there is insufficient
                    <em>change of contrast</em> between the focused and unfocused states.
                </figcaption>

            </figure>

            <p>Additionally, Non-text Contrast does not establish any size requirement and has slightly different rules
                for when exceptions are allowed.</p>


            <p>See the Relationship with Focus Visible section of <a
                    href="https://www.w3.org/WAI/WCAG22/Understanding/non-text-contrast.html">Understanding 1.4.11
                    Non-text Contrast</a> for more details and examples.</p>

        </section>

        <section id="keyboard-focus">
            <h3>Component keyboard focus</h3>
            <p>The preamble to this Success Criterion is "When a user interface component has keyboard focus..." The
                <em>keyboard focus</em> is the point of interaction for someone using a keyboard. For environments with
                a keyboard-operable interface, the keyboard focus can be moved around the interface in order to interact
                with different components. Whichever component is being interacted with has focus.
            </p>

            <p>WCAG defines <em>user interface component</em> as "a part of the content that is perceived by users as a
                single control for a distinct function." Because different users may perceive controls differently,
                there is a potential for some variation when interpreting what constitutes both a <em>single
                    control</em> and a <em>distinct function</em>. This is particularly the case when something visually
                presents in a way that may differ from how it is programmatically created under the covers. Where there
                is not a native HTML component upon which to base designs, there can be great variations in how the
                components and their focus indicators are portrayed. Further, some components have sub-components that
                can take focus, such as the menu items on a menu.</p>

            <p>Nonetheless, consistent results from different testers were obtained for this Success Criterion by using
                the focus indicator itself as the gauge of what constitutes the component being interacted with. For
                complex components, the three typical focus indicators are as follows:</p>

            <ul>
                <li>Focus indicator around only the whole component</li>
                <li>Focus indicators around both the component and subcomponent</li>
                <li>Focus indicator around only the subcomponent</li>
            </ul>

            <p>Each of these will be discussed, using a tablist as a familiar complex component.</p>

            <h4>Focus indicator around only the whole component</h4>
            <figure id="component-complex-whole">

                <img src="img/component-complex-whole.png"
                    alt="Three tab buttons shown with a dark blue rectangle around all three tab buttons." />
                <figcaption> A tablist with a focus indicator around only the whole.</figcaption>
            </figure>

            <p>When the focus indicator is shown only around the whole tablist, the user is guided to considering the
                tablist as a single user component. The tab items within it are visually distinguished between selected
                and unselected states (and visual indicators of selection state must meet the criteria given in <a
                    href="https://www.w3.org/WAI/WCAG22/Understanding/non-text-contrast.html">1.4.11 Non-text
                    Contrast</a>).</p>

            <p>Having a focus indicator <em>only</em> around the whole is possible where there is no need to have a
                selected sub-component while another sub-component has focus. For a tablist which synchronizes its tab
                panel content with whatever tab is active, only one tab item can be selected at a time, and since
                whatever tab is selected is considered active, a separate focus indicator is redundant.</p>


            <p>Result: the group focus indicator must meet the requirements of this Success Criterion.</p>

            <p>A <a href="https://codesandbox.io/s/practical-cori-nl4pld?file=/index.html">radio button group</a> and a
                <a href="https://www.w3.org/WAI/ARIA/apg/example-index/slider/slider-rating.html">star-rating
                    widget</a>, which each use only a whole-component focus indicator, provide working examples of
                different complex components that pass the primary requirements of this Success Criterion. In the star
                ratings example, users can increment the rating by 1/2 stars. Not only is a focus indicator for each 1/2
                star unnecessary, but it would actually be difficult to achieve without making the interaction
                confusing.
            </p>

            <h4>Focus indicators around both the component and subcomponent</h4>

            <figure id="component-complex-both">

                <img src="img/component-complex-both.png"
                    alt="Three tab buttons shown with a dark blue rectangle around all three tab buttons, the first tab button also has a dark outline as well as a blue bar indicating it is selected." />
                <br />
                <img src="img/component-complex-both-unselected.png"
                    alt="The same tab list showing except the first tab is selected, but the second has the focus outline." />
                <figcaption> The same tablist in two states. In the first, focus is around both the tablist and the
                    currently selected tab; in the second, focus is around both the tablist and an unselected tab.
                </figcaption>
            </figure>

            <p>For a tablist which does not keep its tab panel content synchronized with whatever tab is selected, there
                needs to be a focus indicator for the tab item subcomponent. This is because the tab item with focus may
                be different than the selected item.</p>
            <p>The user can navigate to the tablist, which in this implementation has a focus rectangle around the whole
                tablist as well as one around a tab item (conventionally the item that is currently selected). The focus
                around the whole is helpful in cueing a keyboard user that this is a complex component that has its own
                interaction. The user can then move focus between the unselected and selected tab items -- each of which
                in turn has its own focus indicator -- before activating one, which then makes it selected as well as
                focused, and updates the tab panel to match.</p>
            <p>In this scenario, either the group focus indicator or the sub-component indicator must meet the
                requirements of this Success Criterion. To avoid being overly prescriptive, the Success Criterion allows
                authors to choose which makes the most sense. Generally, if a sub-component focus is necessary, it
                should be assessed instead of the group indicator.</p>

            <p>Result: the focus indicator for the tab item meets the requirements of this Success Criterion. The
                tablist focus indicator does not need to meet the requirements.</p>

            <p>A <a href="https://www.w3.org/WAI/ARIA/apg/example-index/slider/slider-color-viewer.html">slider to pick
                    colors</a> provides a working example of a different complex component that predominantly shows
                focus for the subcomponent. In this case, the thumb slider sub-component has a focus indicator of
                sufficient size and contrast to pass the sufficient area calculation. There is also a subtle focus
                around the whole slider component, but it does not need to be assessed to pass this Success Criterion.
            </p>


            <h4>Focus indicator around only the subcomponent</h4>

            <figure id="component-complex-sub">

                <img src="img/component-complex-sub.png"
                    alt="Three tab buttons shown and the first button has a dark outline." />
                <figcaption> The same tabs as in the prior set, but the focus indicator around the whole is removed.
                </figcaption>
            </figure>

            <p>The same unsynchronized tablist can also be implemented as something which only shows focus on the tab
                items and not on the whole. The behaviour is the same as in the prior example, but there is never a
                focus indicator placed around the tablist. This interaction is acceptable, but it is not best practice
                since it demands more understanding from the user with less information. For example, some visual cues
                for the tablist and tab items (and tab panel) may not be clear. As well, keyboard users may not
                initially understand the expected keyboard interaction.</p>

            <p>Result: the focus indicator for the tab item must meet the requirements of this Success Criterion,
                judging focus with both selected and unselected tab items.</p>

            <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/tab_role#example">
                    functional example of sub-component-only tab focus</a> has an indicator that is large enough (at
                least four times the shortest side) with sufficient contrast to pass the focus area language of this
                Success Criterion.</p>


            <h4>Where something with focus is not a user interface component</h4>
            <p>Some pages contain very large editing regions, such as web implementations of word processors and code
                editors. Unlike a <code>textarea</code> element, which is a user interface component, these large
                editing regions do not typically meet the definition of <a>user interface components</a>;
                they are not "perceived by users as a single control for a distinct function."
                Providing focus indicators around such editing regions may still be beneficial to some; however, where
                the region is not perceived as a single control, it is not covered by this Success Criterion. The web
                page will still need to provide a insertion point (caret indicator) in such editing regions in order to
                meet the requirements of <a href="https://www.w3.org/WAI/WCAG22/Understanding/focus-visible.html">2.4.7
                    Focus Visible</a>.</p>

            <p>Some non-operable elements can take focus (such as a heading element that is the target of a skip link).
                However, the preamble of this Success Criterion refers to user interface components; it is only when the
                element with focus is operable by keyboard that this Success Criterion applies.</p>
        </section>

        <section id="exceptions">
            <h3>Exceptions</h3>

            <p>There are two situations where the focus appearance does not need to be assessed:</p>

            <ul>
                <li>the focus indicator cannot be adjusted by the author</li>
                <li>the author has not modified the effects of the user agent default</li>
            </ul>

            <section id="exception-cannot-adjust">
                <h4>First exception: the focus indicator cannot be adjusted by the author</h4>

                <blockquote>
                    <p>The focus indicator is determined by the user agent and cannot be adjusted by the author</p>
                </blockquote>

                <p>Some components or technologies may not allow the author to adjust the focus indicator. This is the
                    case with HTML <code>select</code> elements (both single and multi-select), where the visual
                    treatments for selection and focus cannot be adjusted by the author. In this case the Success
                    Criterion does not apply.</p>

                <figure id="country-select">

                    <img src="img/focus-indicator-select.png"
                        alt="A country select element with Afghanistan selected and Albani with focus" />
                    <figcaption>Passes: The user agent's default <code>select</code> element presentation cannot be
                        modified by the author, so it passes regardless of the quality of the focus indicator
                    </figcaption>
                </figure>

            </section>

            <section id="exception-default">
                <h4>Second exception: the default indicator and background are not modified</h4>

                <blockquote>
                    <p>The focus indicator and the indicator's background color are not modified by the author</p>
                </blockquote>

                <p>If the focus indicator and the background behind the focus indicator are not modified by the author,
                    the Success Criterion does not apply.</p>

                <p>The intent of this exception is to reduce burden on authors by allowing them to rely on the default
                    indicators provided by user agents (browsers). If all user agents provided good focus indicators,
                    authors would be able to concentrate efforts on other accessibility considerations. Unfortunately,
                    browser default focus indicators vary by component, browser, and across devices and operating
                    systems, and the default focus indicators in some browsers can be difficult to see (such as a 1px
                    dotted outline). For this reason, most authors override browser defaults in order to overcome these
                    deficiencies and create a more uniform user experience, regardless of browser.</p>

                <p>Some browser makers are improving their default focus indicators to make them more visible. As more
                    browsers adopt defaults that meet the primary bullets of this Success Criterion, authors will be
                    able to achieve improved focus indicators without customization.</p>

                <h4>Modifying the focus indicator background</h4>

                <p>Browser default focus indicators can be made <em>more</em> difficult to see if the author modifies
                    the pixels directly adjacent to the indicator (commonly referred to as its background), such as by
                    positioning a component on top of an image or gradient background, or altering the page's default
                    white background color, for instance using a blue background in combination with a browser's blue
                    default indicator. For this reason, where the author alters the pixels directly adjacent to the
                    default focus indicator, the user agent exception does not apply, and the author will need to verify
                    they meet the size and contrast requirements of this Success Criterion.</p>
                <p class="note">Altering the <code>body</code> element's <code>background-color</code> attribute
                    <em>is</em> one way of altering the pixels directly adjacent to the indicator in most
                    implementations. However, specifying a value of white (<code>#FFFFFF</code>) does not nullify this
                    exception since, as established in the third note of the <a>contrast ratio</a> definition, the
                    default ("unspecified") color is assumed to be white.
                </p>

                <p>As well, if the browser provides an indicator <em>within</em> a component by default, then authors
                    can potentially reduce the visibility by changing the component color (which in such a scenario is
                    the background color for the focus indicator). For example, if the default indicator on a button
                    uses a colored inner border, authors can negatively affect the focus appearance by making the button
                    or its unfocused border color a similar-luminosity color. For this reason, this user agent exception
                    can only be met if the author both does not modify the default focus indicator <em>and</em> does not
                    modify its background.</p>

                <figure id="focus-indicator-browser-defaults-modified-background">

                    <img src="img/focus-indicator-browser-defaults-modified-background.png"
                        alt="A button with an author-customized blue border which looks very similar to the blue border used by a user agent default focus indicator" />
                    <figcaption>Fails: The middle button is focused using a browser's default focus indicator, but it is
                        very difficult to tell which button is focused because the custom blue border on the unfocused
                        button uses a similar color.</figcaption>

                </figure>
            </section>
        </section>
    </section>

    <section id="benefits">
        <h2>Benefits of Focus Appearance</h2>

        <ul>
            <li>This Success Criterion helps anyone who relies on the keyboard to operate the page, by letting them
                visually determine the component on which keyboard operations will interact at any point in time.</li>
            <li>People with attention limitations, short term memory limitations, or limitations in executive processes
                benefit by being able to discover where the focus is located.</li>
        </ul>

    </section>

    <section id="examples">
        <h2>Examples of Focus Appearance</h2>

        <ul>
            <li>When links receive focus, an outline is displayed around the link that contrasts with the background
                adjacent to the link.</li>
            <li>When buttons receive focus, an outline is displayed within the button (around the text) that contrasts
                with the button's background.</li>
            <li>When text fields receive focus, an outline is displayed around the field, indicating that the input has
                focus.</li>
            <li>When radio buttons receive focus, an outline is displayed around the control, indicating that the input
                has focus.</li>
        </ul>

    </section>

    <section id="resources">
        <h2>Related Resources</h2>
        <ul>
            <li><a href="https://www.sarasoueidan.com/blog/focus-indicators/">A guide to designing accessible focus
                    indicators</a> by Sara Soueidan</li>
            <li><a href="https://alastairc.uk/tests/wcag22-examples/focus-more-visible-3.html">Focus appearance -
                    testing version 3</a></li>
            <li><a href="https://alastairc.uk/tests/wcag22-examples/focus-more-visible-6.html">Focus visible testing
                    (Feb 2022)</a></li>
            <li><a href="https://adrianroselli.com/2017/02/avoid-default-browser-focus-styles.html">Avoid Default
                    Browser Focus Styles</a> by Adrian Roselli</li>
        </ul>
    </section>

    <section id="techniques">
        <h2>Techniques</h2>

        <section id="sufficient">
            <h3>Sufficient Techniques</h3>

            <ul>
                <li>

                    <a href="../../techniques/general/G195" class="general">Using an author-supplied, highly visible
                        focus indicator</a>

                </li>
                <li>
                    <a href="../../techniques/css/C40">Creating a two-color focus indicator to ensure sufficient
                        contrast</a>
                </li>
                <li>
                    <a href="../../techniques/css/C41">Creating a contrasting focus indicator inside the component</a>
                </li>
            </ul>
        </section>

        <section id="failure">
            <h3>Failures</h3>
            <ul>
                <li>
                    <a href="../../techniques/failures/F55">Failure of Success Criteria 2.1.1, 2.4.7, 2.4.13, and 3.2.1
                        due to using script to remove focus when focus is received</a>
                </li>
                <li>
                    <a href="../../techniques/failures/F78">Failure of Success Criterion 1.4.11, 2.4.7 and 2.4.13 due to
                        styling element outlines and borders in a way that removes or renders non-visible the visual
                        focus indicator</a>
                </li>
            </ul>
        </section>
    </section>
</body>

</html>